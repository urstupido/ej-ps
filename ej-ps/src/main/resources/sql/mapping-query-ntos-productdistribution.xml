<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN"
"http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.2.dtd">
<queryservice>
	<queries>
		<query id="findProductDistributionList">
			<statement>
				SELECT rownum as no,
					   cont_no,
					   prod_no,
					   seq,
					   p.prod_name,
					   dstr_rto,
					   dstr_rto_reg_dt,
					   last_chng_usid,
					   last_chng_dt
				FROM prod_dstr_rto d, prod_base p
				WHERE d.prod_no = p.prod_no
			</statement>
		</query>
		
		
		<query id="updateProductDistribution">
			<statement>
				UPDATE prod_base
				SET prod_name = :vo.prodName,
					prod_lcls_c = :vo.prodLclsC,
					prod_mcls_c = :vo.prodMclsC,
					prod_scls_c = :vo.prodSclsC,					   
					prod_sell_entr_dt = :vo.prodSellEntrDt,
					prod_sell_end_dt = :vo.prodSellEndDt,
					asts_mng_org_c = :vo.astsMngOrgC, 
					prod_offr_org_c = :vo.prodOffrOrgC,
					last_chng_usid = :vo.lastChngUsid,
					last_chng_dt = sysdate
				WHERE prod_no = :vo.prodNo
			</statement>
		</query>
		
		<!-- 
		
		SELECT rownum as no, cont_no, prod_no, p.prod_name , dstr_rto
FROM prod_dstr_rto d, prod_base p, (select cont_no, prod_no, count(*) as seq from prod_dstr_rto group by cont_no,prod_no) a
WHERE d.prod_no = p.prod_no AND a.cont_no=d.cont_no and a.prod_no = d.prod_no and d.seq = lpad(a.seq,3,'0');

select lpad(count(*)+1,3,'0')
from prod_dstr_rto
where cont_no = 'CONTRACT-00001' and prod_no = 'PRODUCT-00001'
group by cont_no, prod_no

		 -->
	</queries>
</queryservice>